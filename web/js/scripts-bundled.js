!function(e){var t={};function s(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";function a(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}s.r(t);new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.step=$("#step_one").hasClass("pari-match__form--active")?1:2,this.numberEl=$("#number_mask"),this.numberSendEl=$("#number_send"),this.codeEl=$("#code_mask"),this.codeSendEl=$("#code_send"),this.stepBackEl=$("#step_back"),this.events(),this.validation(),this.ajax()}var t,s,n;return t=e,(s=[{key:"events",value:function(){var e=this;document.addEventListener("DOMContentLoaded",(function(){e.numberEl.inputmask({mask:"+ 255 999 999 999"}),e.codeEl.inputmask({mask:"9 9 9 9 9 9"}),e.numberSendEl.attr("disabled",!0),e.codeSendEl.attr("disabled",!0)})),this.stepBackEl.on("click",(function(){e.step=1,$(".pari-match__form--number").addClass("pari-match__form--active"),$(".pari-match__form--code").removeClass("pari-match__form--active"),$("#user_id").val(""),$("#user_password").val(""),$("#user_number").val("")}))}},{key:"validation",value:function(){var e=this;this.numberEl.on("input",(function(){var t=e.numberEl;""==t.val()?t.removeClass("texted"):t.addClass("texted"),t.val().replace(/\D/g,"")&&t.siblings(".input__status").removeClass("input__status--error"),12===t.val().replace(/\D/g,"").length?e.numberSendEl.attr("disabled",!1):e.numberSendEl.attr("disabled",!0)})),this.codeEl.on("input",(function(){var t=e.codeEl;""==t.val()?t.removeClass("texted"):t.addClass("texted"),t.val().replace(/\D/g,"")&&t.siblings(".input__status").removeClass("input__status--error"),6===t.val().replace(/\D/g,"").length?e.codeSendEl.attr("disabled",!1):e.codeSendEl.attr("disabled",!0)})),$(document).on("click",".input__status--error",(function(e){$(this).siblings(".input__el").val(""),$(this).removeClass("input__status--error")}))}},{key:"ajax",value:function(){var e=this;this.numberSendEl.on("click",(function(t){if(t.preventDefault(),1===e.step){e.numberSendEl.attr("disabled",!0);var s={ref:e.getAllUrlParams(window.location.href).ref,number:e.numberEl.val().replace(/\D/g,"")},a=new FormData;a.append("ref",s.ref),a.append("number",s.number),$.ajax({type:"POST",url:"/site/register",cache:!1,processData:!1,dataType:"json",contentType:!1,data:a,success:function(t){"ok"==t.status?(e.numberSendEl.siblings(".input__status").removeClass(".input__status--error"),$(".pari-match__form--number").removeClass("pari-match__form--active"),$(".pari-match__form--code").addClass("pari-match__form--active"),e.step=2,e.numberSendEl.siblings(".input").find(".input__status").removeClass("input__status--error"),e.numberSendEl.siblings(".input").find(".input__status").addClass("input__status--success"),$("#user_id").val(t.userId),$("#user_password").val(t.password),$("#user_number").val(t.number)):e.numberSendEl.siblings(".input").find(".input__status").addClass("input__status--error")}}).always((function(){e.numberSendEl.attr("disabled",!1)}))}})),this.codeSendEl.on("click",(function(t){if(t.preventDefault(),2===e.step){e.codeSendEl.attr("disabled",!0);var s={code:e.codeEl.val().replace(/\D/g,""),user_id:$("#user_id").val(),password:$("#user_password").val(),number:$("#user_number").val()},a=new FormData;a.append("code",s.code),a.append("user_id",s.user_id),a.append("password",s.password),a.append("number",s.number),$.ajax({type:"POST",url:"/site/check",cache:!1,processData:!1,dataType:"json",contentType:!1,data:a,success:function(t){if("ok"==t.status){e.codeSendEl.siblings(".input").find(".input__status").removeClass("input__status--error"),e.codeSendEl.siblings(".input").find(".input__status").addClass("input__status--success"),$("#complete").addClass("complete--show");var s=new XMLHttpRequest;s.open("POST","https://parimatch.co.tz/rest/customer/session/login",!0),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("X-BRAND-DATA","1");var a='{"login":"'.concat($("#user_number").val().substr(3),'","password":"').concat($("#user_password").val(),'"}');s.onreadystatechange=function(){if(s.readyState==XMLHttpRequest.DONE&&200==s.status){var e=s.getResponseHeader("X-ODDS-SESSION");e&&(window.location.href="https://parimatch.co.tz/?sessionAuth="+e)}},s.send(a)}else e.codeSendEl.siblings(".input").find(".input__status").addClass("input__status--error")}}).always((function(){e.codeSendEl.attr("disabled",!1)}))}}))}},{key:"getAllUrlParams",value:function(e){var t=e?e.split("?")[1]:window.location.search.slice(1),s={};if(t)for(var a=(t=t.split("#")[0]).split("&"),n=0;n<a.length;n++){var r=a[n].split("="),i=r[0],u=void 0===r[1]||r[1];if(i=i.toLowerCase(),"string"==typeof u&&(u=u.toLowerCase()),i.match(/\[(\d+)?\]$/)){var o=i.replace(/\[(\d+)?\]/,"");if(s[o]||(s[o]=[]),i.match(/\[\d+\]$/)){var l=/\[(\d+)\]/.exec(i)[1];s[o][l]=u}else s[o].push(u)}else s[i]?s[i]&&"string"==typeof s[i]?(s[i]=[s[i]],s[i].push(u)):s[i].push(u):s[i]=u}return s}}])&&a(t.prototype,s),n&&a(t,n),e}())}]);